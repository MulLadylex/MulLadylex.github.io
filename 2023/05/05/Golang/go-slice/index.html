<!DOCTYPE html><html lang="zh_CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Golang切片 | LexLady</title><script>var config = {"root":"/project/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 共 $1 行","copy":"复制","copyFinish":"完成","expand":"展开"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><script>mermaid.initialize({
 startOnLoad: true
 , theme: 'dark'
});</script><link rel="stylesheet" href="/project/css/arknights.css"><link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.6.0/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/project/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/project/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/project/atom.xml" title="LexLady" type="application/atom+xml">
</head><body style="background-image:url(https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg);"><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><ol class="navContent"><li class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></li><li class="navItem"><a class="navBlock" href="/project/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/project/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav><div class="search-popup"><div id="search-result"></div></div></header><article><div id="post-bg"><div id="post-title"><h1>Golang切片</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2023-05-05T06:45:56.000Z" id="date"> 2023-05-05</time></div></span><br><span>Last Update: <div class="control"><time datetime="2024-06-29T16:46:19.747Z" id="updated"> 2024-06-30</time></div></span></div></div><hr><div id="post-content"><p>切片就是对数组的抽象，提供了一种更加灵活，功能强大的“动态数组”。</p>
<h2 id="定义切片"><a href="#定义切片" class="headerlink" title="定义切片"></a>定义切片</h2><ol>
<li>声明一个未指定大小的数组<br><code>var identifier []type</code></li>
<li>使用<code>make()</code>函数创建<br><code>var slice []type = make([]type, len)</code>或者通过内置函数<code>make()</code>初始化切片<code>s</code><br><code>s :=make([]int,len,cap)</code>,<code>[]int</code>标识为其元素类型为<code>int</code>的切片。<br><code>make()</code>函数这里容量可选</li>
</ol>
<h2 id="切片的初始化"><a href="#切片的初始化" class="headerlink" title="切片的初始化"></a>切片的初始化</h2><p>切片可以直接通过数组来初始化，也可以通过内置函数<code>make()</code>初始化。</p>
<p>初始化时默认<code>len=cap</code>，在追加元素时如果容量<code>cap</code>不足时将按<code>len的2</code>倍扩容。</p>
<p><code>s :=[] int &#123;1,2,3 &#125;</code>直接初始化切片，<code>[]</code>表示是切片类型，<code>&#123;1,2,3&#125;</code>初始化值依次是<code>1,2,3</code>。其<code>cap=len=3</code>。</p>
<p><code>s := arr[:]</code>初始化切片<code>s</code>，是数组<code>arr</code>的引用。</p>
<p><code>s := arr[startIndex:endIndex]</code>将<code>arr</code>中从下标<code>startIndex 到 endIndex-1</code>下的元素创建为一个新的切片。（不包含endIndex）</p>
<p><code>s := arr[startIndex:]</code>缺少<code>endIndex</code>时将表示一直到<code>arr</code>的最后一个元素。</p>
<p><code>s := arr[:endIndex]</code>缺少<code>startIndex</code>时将表示从<code>arr</code>的第一个元素开始。</p>
<p><code>s1 := s[startIndex:endIndex]</code>通过切片<code>s</code>初始化切片<code>s1</code></p>
<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>len()</td>
<td>获取切片长度</td>
</tr>
<tr>
<td>cap()</td>
<td>切片最大容量</td>
</tr>
<tr>
<td>append()</td>
<td>追加元素</td>
</tr>
<tr>
<td>copy()</td>
<td>拷贝</td>
</tr>
</tbody></table>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>   numbers := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>&#125;<br>   number1:=<span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>)<br>   number2:=numbers[:<span class="hljs-number">3</span>]<br>   number3:=numbers[<span class="hljs-number">2</span>:<span class="hljs-number">5</span>]<br>   number4:=numbers[<span class="hljs-number">3</span>:<span class="hljs-number">8</span>]<br>   <span class="hljs-comment">// cap的大小与截取的位置有关</span><br>   <span class="hljs-comment">// number3 的 ptr 指向第三个元素，后面还剩8个元素所以cap=8</span><br>   <span class="hljs-comment">// number4 的 ptr 指向第四个元素，后面还剩7个元素所以cap=7</span><br>   printSlice(numbers)  <span class="hljs-comment">//len=10  cap=10 slice=[0 1 2 3 4 5 6 7 8 9]</span><br>   printSlice(number1)  <span class="hljs-comment">//len=0  cap=5 slice=[]</span><br>   printSlice(number2)  <span class="hljs-comment">//len=3  cap=10 slice=[0 1 2]</span><br>   printSlice(number3)  <span class="hljs-comment">//len=3  cap=8 slice=[2 3 4]</span><br>   printSlice(number4)  <span class="hljs-comment">//len=5  cap=7 slice=[3 4 5 6 7]</span><br><br>   <span class="hljs-comment">// append()</span><br><br>   <span class="hljs-comment">// 允许追加空切片</span><br>   numbers = <span class="hljs-built_in">append</span>(numbers, <span class="hljs-number">0</span>)<br><br>   <span class="hljs-comment">// 向切片添加一个或多个元素</span><br>   numbers = <span class="hljs-built_in">append</span>(numbers, <span class="hljs-number">11</span>,<span class="hljs-number">12</span>)<br><br>   <span class="hljs-comment">// copy()</span><br><br>   <span class="hljs-comment">// 创建切片newNumbers是之前切片的两倍</span><br>   newNumbers := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(numbers), (<span class="hljs-built_in">cap</span>(numbers))*<span class="hljs-number">2</span>)<br>   <span class="hljs-built_in">copy</span>(newNumbers, numbers)<br>   printSlice(newNumbers)<br>   <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSlice</span><span class="hljs-params">(x []<span class="hljs-type">int</span>)</span></span> &#123;<br>   fmt.Printf(<span class="hljs-string">&quot;len=%d  cap=%d   slice=%v\n&quot;</span>,<span class="hljs-built_in">len</span>(x),<span class="hljs-built_in">cap</span>(x),x)<br>&#125;<br></code></pre></td></tr></table></figure>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/project/2023/05/05/Golang/go-structure/">← Next Golang结构体</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/project/2023/05/05/Solidity/storage_rule/">EVM中的存储规则 Prev →</a></div></div></div></div><div id="bottom-btn"><a id="to-index" href="#toc-div" title="INDEX">≡</a><a id="to-top" onClick="scrolls.scrolltop();" title="to top" style="opacity: 0; display: none;">∧</a></div></article><aside><div id="aside-top"><div id="about"><a href="/project/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Lexlady</a></h1><div id="description"></div></div><div id="aside-block"><div id="toc-div"><h1>INDEX</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%88%87%E7%89%87"><span class="toc-number">1.</span> <span class="toc-text">定义切片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E7%89%87%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">2.</span> <span class="toc-text">切片的初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">内置函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.</span> <span class="toc-text">示例</span></a></li></ol></div></div></div><footer><nobr>published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight</a></nobr><wbr><nobr>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script class="pjax-js">reset=_=>{code.findCode();mermaid.init(undefined, ('.mermaid'));}</script><script src="/project/js/arknights.js"></script><script>window.addEventListener("load",()=>{reset()})</script></body></html>